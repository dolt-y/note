# git操作问题汇总

## 合并问题

- 对于合并过来的分支
  - 快速前进合并（Fast-Forward Merge）
   发生条件： 如果 master 分支在你的 feature 分支创建之后没有新的提交，那么 feature 分支的历史记录是 master 分支历史记录的“直接延续”。
   行为： Git 不会创建新的合并提交。它只是简单地将 master 分支的指针移动到 feature 分支的最新提交。
   结果： 此时，你的工作区和暂存区会立即反映 feature 分支的最新状态，就像你直接在 master 上做了这些提交一样。因为没有中间的冲突解决过程，Git 认为所有更改都已经“完成”并处于可提交状态。所以，你不会看到这些文件在“暂存区”等待 git add，它们已经自动被 Git 包含了。

  - 三向合并（Three-Way Merge / Recursive Merge）
   发生条件： 如果 master 分支在你创建 feature 分支之后有新的提交，那么 master 分支和 feature 分支的历史记录是分叉的。
   行为： Git 会尝试找到两个分支的共同祖先，然后将两个分支上的更改合并到一个新的合并提交中。
   成功合并（无冲突）： 如果 Git 能够自动解决所有差异而没有冲突，它会执行以下操作：
   将合并后的文件内容放入你的工作区。
   自动将这些合并后的文件添加到暂存区。
   然后，你可以直接进行 git commit 来完成合并。

  - 避免git 快速前进合并的操作
    1. git merge --no-ff <分支名称>： 禁用快速前进合并，并生成一个新的合并提交。
    2. git rebase <分支名称>： 强制将当前分支变基到指定分支，并丢弃原有分支的历史记录。// 慎用

## 回退问题

- 本地回退节点
   1. git reset --hard <commit_id>
   作用： 将当前分支回退到指定提交节点，丢弃当前分支之后的所有提交记录。

   2. git reset --soft <commit_id>
   作用： 将当前分支回退到指定提交节点，保留当前分支之后的所有提交记录。

   3. git reset --mixed <commit_id>
   作用： 将当前分支回退到指定提交节点，保留当前分支之后的所有提交记录，但丢弃暂存区和工作区的修改。

- 远程回退节点
   1. git push origin <分支名称> --force
   作用： 强制推送当前分支到远程仓库，覆盖远程分支的历史记录。

   2. git push origin <分支名称>:refs/heads/<分支名称>
   作用： 强制推送当前分支到远程仓库，并重命名远程分支的名称。

   3. git push origin +<分支名称>
   作用： 强制推送当前分支到远程仓库，并将远程分支的指针指向当前分支的最新提交。

- 将本地分支强制回退到远程分支的最新提交 (当你本地分支hard指针 混乱的时候)
   1. git reset --hard origin/<分支名称>
  
- 线上代码回退
  - 本地回退代码到指定版本，然后再提交到远程仓库。
  - 远程回退代码到指定版本，本地代码拉取最新代码。