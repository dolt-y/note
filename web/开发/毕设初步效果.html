<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>零浪费生活</title>
    <style>
        body {
            font-family: 'KaiTi', 'serif';
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        header {
            background-color: white;
            color: black;
            height: 7vh;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            transition: transform 0.3s ease;
            transform: translateY(-100%);
        }

        header.visible {
            transform: translateY(0);
        }

        .header-left {
            display: flex;
            align-items: center;
        }

        .header-right {
            display: flex;
            align-items: center;
        }

        .header-right a {
            color: black;
            text-decoration: none;
            margin-left: 20px;
            display: flex;
            align-items: center;
        }

        .header-right a img {
            width: 20px;
            height: 20px;
            margin-right: 5px;
        }

        main {
            display: flex;
            flex-direction: column;
            flex: 1;
            justify-content: center;
            align-items: center;
            position: relative;
            margin-top: 0;
            /* 调整 main 的顶部边距为 0 */
        }

        .image-container {
            position: relative;
            width: 99vw;
            height: 100%;
            max-height: 600px;
            overflow: hidden;
        }

        .image-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: filter 0.3s ease;
        }

        .text {
            position: absolute;
            top: 30%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            text-align: center;
            padding: 1em;
            border-radius: 5px;
        }

        .search-container {
            position: absolute;
            top: 60%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100vw;
            /* 更改宽度以适应移动端 */
            max-width: 400px;
            /* 设置最大宽度 */
            display: flex;
            align-items: center;
        }

        .search-box {
            padding: 0.5em;
            border: none;
            border-radius: 5px;
            width: 100%;
            max-width: 300px;
            font-size: 1em;
            color: white;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .weather {
            position: absolute;
            top: 10%;
            right: 5%;
            color: white;
            display: flex;
            align-items: center;
        }

        .weather img {
            width: 40px;
            height: 40px;
            margin-right: 5px;
        }

        .content {
            width: 100%;
            max-width: 1200px;
            padding: 2em;
            text-align: center;
        }

        .grid-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 20px;
        }

        .item {
            background-color: #f9f9f9;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            padding: 1em;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .item img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 10px 10px 0 0;
        }

        footer {
            background-color: rgb(168, 166, 166);
            color: white;
            text-align: center;
            padding: 1em;
            margin-top: auto;
        }

        .back-to-top {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            transition: background-color 0.3s ease, transform 0.3s ease;
        }

        .back-to-top:hover {
            background-color: #45a049;
            transform: scale(1.1);
        }
    </style>
</head>

<body>
    <header id="header">
        <div class="header-left">
            <h5>零浪费生活</h5>
        </div>
        <div class="header-right">
            <a href="#"><img src="https://img.icons8.com/ios-glyphs/30/000000/home.png" alt="首页">首页</a>
            <a href="#"><img src="https://img.icons8.com/ios-glyphs/30/000000/login-rounded-right.png" alt="登录">登录</a>
            <a href="#"><img src="https://img.icons8.com/ios-glyphs/30/000000/forum.png" alt="论坛">论坛</a>
            <a href="#"><img src="https://img.icons8.com/ios-glyphs/30/000000/info.png" alt="指南">指南</a>
        </div>
    </header>
    <main>
        <div class="image-container">
            <img src="./img/bk6.png" alt="零浪费生活背景图片">
            <div class="text" id="dateTime">
                <!-- 日期和时间将在这里显示 -->
            </div>
            <div class="search-container">
                <input type="text" placeholder="搜索..." class="search-box" id="searchBox">
            </div>
            <div class="weather" id="weatherInfo">
                <img src="https://a.amap.com/jsapi_demos/img/weather/1.png" alt="天气图标" id="weatherIcon">
                <span id="weatherText">加载中...</span>
            </div>
        </div>
        <div class="content">
            <h2>什么是零浪费？</h2>
            <div class="grid-container">
                <div class="item">
                    <img src="./img/bk.jpg" alt="环保小贴士">
                    <h3>环保小贴士</h3>
                    <p>简单易行的环保小技巧，让你的生活更加可持续。</p>
                </div>
                <div class="item">
                    <img src="./img/bk2.jpg" alt="零浪费方法">
                    <h3>零浪费方法</h3>
                    <p>探索不同的零浪费生活方式，从购物到日常选择。</p>
                </div>
                <div class="item">
                    <img src="./img/bk4.jpg" alt="环保产品推荐">
                    <h3>环保产品推荐</h3>
                    <p>推荐一些实用的环保产品，助你实现零浪费生活。</p>
                </div>
                <div class="item">
                    <img src="./img/bk6.png" alt="家庭环保">
                    <h3>家庭环保</h3>
                    <p>家庭中可以轻松实践的环保措施，助力可持续生活。</p>
                </div>
                <div class="item">
                    <img src="./img/bk4.jpg" alt="减少浪费">
                    <h3>减少浪费</h3>
                    <p>了解如何在日常生活中减少资源浪费。</p>
                </div>
                <div class="item">
                    <img src="./img/bk2.jpg" alt="环保购物">
                    <h3>环保购物</h3>
                    <p>选择可持续的购物方式，支持环保品牌。</p>
                </div>
            </div>
        </div>
    </main>
    <footer>
        <p>&copy; 2023 零浪费生活. 版权所有.</p>
    </footer>

    <button class="back-to-top" id="backToTop">↑</button>

    <script>
        const searchBox = document.getElementById('searchBox');
        const imgContainer = document.querySelector('.image-container img');
        const backToTopButton = document.getElementById('backToTop');
        const weatherText = document.getElementById('weatherText');
        const weatherIcon = document.getElementById('weatherIcon');
        const header = document.getElementById('header');
        const dateTimeElement = document.getElementById('dateTime');
        const apiKey = 'a8eabf2acfd930aadf93de2286159169'; // Your API key here

        let lastScrollTop = 0;
        let ticking = false;

        window.addEventListener('scroll', () => {
            backToTopButton.style.display = (document.body.scrollTop > 100 || document.documentElement.scrollTop > 100) ? "block" : "none";

            const currentScrollTop = window.pageYOffset || document.documentElement.scrollTop;

            if (!ticking) {
                window.requestAnimationFrame(() => {
                    handleScroll(currentScrollTop);
                    ticking = false;
                });
                ticking = true;
            }

            lastScrollTop = currentScrollTop;
        });

        function handleScroll(currentScrollTop) {
            if (currentScrollTop > lastScrollTop) {
                // Scrolling down
                header.classList.remove('visible');
            } else {
                // Scrolling up
                header.classList.add('visible');
            }
        }

        backToTopButton.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        searchBox.addEventListener('focus', () => imgContainer.style.filter = 'blur(5px)');
        searchBox.addEventListener('blur', () => imgContainer.style.filter = 'none');

        searchBox.addEventListener('input', () => {
            const filter = searchBox.value.toLowerCase();
            document.querySelectorAll('.item').forEach(item => {
                const title = item.querySelector('h3').textContent.toLowerCase();
                item.style.display = title.includes(filter) ? '' : 'none';
            });
        });

        async function fetchWeather() {
            const response = await fetch(`https://restapi.amap.com/v3/weather/weatherInfo?city=110000&key=${apiKey}&extensions=all`);
            const data = await response.json();

            if (data.status === '1') {
                const forecast = data.forecasts[0];
                const weather = forecast.casts[0];
                weatherText.textContent = `${weather.daytemp_float}°C, ${weather.dayweather}`;
                const iconMap = {
                    '晴': 'https://a.amap.com/jsapi_demos/img/weather/1.png',
                    '阴': 'https://a.amap.com/jsapi_demos/img/weather/2.png',
                    '小雨': 'https://a.amap.com/jsapi_demos/img/weather/3.png',
                    '中雨': 'https://a.amap.com/jsapi_demos/img/weather/4.png',
                    '大雨': 'https://a.amap.com/jsapi_demos/img/weather/5.png',
                    '雾': 'https://a.amap.com/jsapi_demos/img/weather/6.png',
                    'default': 'https://a.amap.com/jsapi_demos/img/weather/1.png'
                };
                weatherIcon.src = iconMap[weather.dayweather] || iconMap['default'];
            } else {
                weatherText.textContent = '天气信息加载失败';
            }
        }

        function getLunarDate(date) {
            const lunar = new Date(date);
            const lunarYear = lunar.getFullYear();
            const lunarMonth = lunar.getMonth() + 1;
            const lunarDay = lunar.getDate();
            return `${lunarYear}年${lunarMonth}月${lunarDay}日`;
        }

        function updateDateTime() {
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            const lunarDate = getLunarDate(now);

            dateTimeElement.innerHTML = `
                <h2>当前时间：${year}-${month}-${day} ${hours}:${minutes}:${seconds}</h2>
                <h2>农历：${lunarDate}</h2>
            `;
        }

        window.onload = () => {
            header.classList.add('visible');
            fetchWeather();
            updateDateTime();
            setInterval(updateDateTime, 1000);
        };
    </script>
</body>

</html>